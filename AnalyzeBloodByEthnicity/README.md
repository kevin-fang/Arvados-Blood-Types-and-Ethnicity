# Analyzing Blood Type by Ethnicity

Using the blood types generated by an Arvados Pipeline and ethnicities from the Harvard Personal Genome Project, the following python scripts help associate blood types with races/ethnicities.  

## To run:

Clone this project with `git clone https://github.com/kevin-fang/Arvados-Blood-Types-and-Race.git` and navigate to this folder, `/AnalyzingBloodByRace/`.   
Copy the output results from Arvados if you have your own dataset, or use the ones provided. If you use the ones provided, you can skip the next step.  
Copy `StripExtraTitleInfo.py` to the directory containing the raw Arvados data and run `python StripExtraTitleInfo.py`.  

`StripExtraTitleInfo.py` renames the output from the long name from the pipeline such as to just the name of the user's genome. For example, it would rename  "hu123456.gffBloodTypeparsed.txt" to "hu123456." It is needed to cut out extra text from the file name and needs to be run before running the analysis scripts. Works for both 173 PGP genome files and the 433 1000 Genomes Project genome files. This allows the Python program to assume the identifier of the person on the CSV file is the same as the filename.  
To get a simple percent of accuracy from the Harvard PGP data, run `python AnalyzeForCorrectness-PGP.py`

To create formatted tables from your raw data, read the following:
### For 173 Genomes from Harvard PGP:

Run `python AnalyzeByBloodTypePGP.py` and it will read from the CSV file to check for blood types for each file in the `/173-HarvardPGP/` folder. If the survey blood type data is unavailable, use the BOOGIE predictions from Arvados. Sample input and output:  
`python AnalyzeByBloodTypePGP.py`

```
American Indian / Alaska Native, White:
A: 5     B: 0    AB: 0   O: 5  
Hispanic or Latino, White:  
A: 0     B: 0    AB: 0   O: 1  
Asian, White:  
A: 0     B: 1    AB: 0   O: 1  
Native Hawaiian or Other Pacific Islander:  
A: 0     B: 0    AB: 0   O: 1  
Asian:  
A: 1     B: 0    AB: 0   O: 2  
Hispanic or Latino:  
A: 3     B: 0    AB: 0   O: 0  
White:  
A: 62    B: 20   AB: 4   O: 59  
American Indian / Alaska Native, Hispanic or Latino, White:  
A: 2     B: 0    AB: 0   O: 0
```

### For 433 Genomes from the 1000 Genomes Project:

Navigate to `/433-1000Genomes/` and run `python AnalyzeByBloodType1000Genomes.py` and it will print out the results from the Arvados BOOGIE predictions, nicely formatted. Sample input and output:  
`python AnalyzeByBloodType1000Genomes.py`

```
Utah residents with Northern and Western European ancestry:  
44      8       2       42  
Puerto Rican in Puerto Rico:  
3       0       0       0  
Southern Han Chinese, China:   
36      26      6       25  
Luhya in Webuye, Kenya:  
4       1       0       6  
Punjabi in Lahore,Pakistan:  
19      13      2       13  
Yoruba in Ibadan, Nigeria:  
14      14      1       51  
Kinh in Ho Chi Minh City, Vietnam:  
0       1       0       2  
Peruvian in Lima, Peru:  
17      3       0       74 
``` 
